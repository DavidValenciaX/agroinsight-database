Table usuario {
    id INT [pk, increment, not null]
    nombre VARCHAR(50) [not null]
    apellido VARCHAR(50) [not null]
    email VARCHAR(100) [not null, unique]
    password VARCHAR(255) [not null]
    fecha_registro DATETIME [not null]
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table rol {
    id INT [pk, increment, not null]
    nombre VARCHAR(50) [not null, unique]
    descripcion TEXT
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table permiso {
    id INT [pk, increment, not null]
    nombre VARCHAR(50) [not null, unique]
    descripcion TEXT
    accion VARCHAR(100) [not null]
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table rol_permiso {
    rol_id INT [not null, ref: > rol.id, pk]
    permiso_id INT [not null, ref: > permiso.id, pk]
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table finca {
    id INT [pk, increment, not null]
    nombre VARCHAR(100) [not null]
    ubicacion VARCHAR(255) [not null]
    area_total DECIMAL(10,2) [not null]
    latitud DECIMAL(10,8)
    longitud DECIMAL(11,8)
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table usuario_finca_rol {
    usuario_id INT [not null, ref: > usuario.id, pk]
    finca_id INT [not null, ref: > finca.id, pk]
    rol_id INT [not null, ref: > rol.id, pk]
    fecha_asignacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table lote {
    id INT [pk, increment, not null]
    nombre VARCHAR(100) [not null]
    area DECIMAL(10,2) [not null]
    ubicacion VARCHAR(255)
    latitud DECIMAL(10,8)
    longitud DECIMAL(11,8)
    id_finca INT [not null, ref: > finca.id]
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table variedad_maiz {
    id INT [pk, increment, not null]
    nombre VARCHAR(100) [not null, unique]
    descripcion TEXT
    dias_maduracion INT(3) [not null]
    resistencia_sequia ENUM('baja', 'media', 'alta') [not null]
    resistencia_plagas ENUM('baja', 'media', 'alta') [not null]
    rendimiento_promedio DECIMAL(5,2) [not null]
    rendimiento_promedio_unidad_id INT [ref: > unidad_medida.id]
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table cultivo {
    id INT [pk, increment, not null]
    id_lote INT [not null, ref: > lote.id]
    id_variedad_maiz INT [not null, ref: > variedad_maiz.id]
    fecha_siembra DATE [not null]
    area_sembrada DECIMAL(10,2) [not null]
    area_sembrada_unidad_id INT [ref: > unidad_medida.id]
    densidad_siembra INT [not null]
    densidad_siembra_unidad_id INT [ref: > unidad_medida.id]
    estado_id INT [not null, ref: > estado_cultivo.id]
    fecha_cosecha DATE [not null]
    produccion_total INT [not null]
    produccion_total_unidad_id INT [ref: > unidad_medida.id]
    precio_venta_unitario DECIMAL(10,2) [not null]
    precio_venta_unitario_unidad_id INT [ref: > unidad_medida.id]
    cantidad_vendida INT [not null]
    ingreso_total DECIMAL(15,2) [not null]
    costo_produccion DECIMAL(15,2) [not null]
    fecha_venta DATE [not null]
    observaciones TEXT
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table unidad_medida {
    id INT [pk, increment]
    nombre VARCHAR(50) [not null, unique]
    abreviatura VARCHAR(10) [not null, unique]
    categoria_id INT [not null, ref: > categoria_unidad_medida.id]
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table categoria_unidad_medida {
    id INT [pk, increment]
    nombre VARCHAR(50) [not null, unique]
    descripcion TEXT
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table tipo_labor_cultural {
    id INT [pk, increment, not null]
    nombre VARCHAR(100) [not null, unique]
    descripcion TEXT
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table tarea_labor_cultural {
    id INT [pk, increment, not null]
    id_tipo_labor INT [not null, ref: > tipo_labor_cultural.id]
    fecha_programada DATE [not null]
    descripcion TEXT
    costo_mano_obra DECIMAL(10, 2) [not null, default: 0.00]
    estado_id INT [not null, ref: > estado_tarea_labor_cultural.id]
    observaciones TEXT
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_completada DATE
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table tipo_insumo_agricola {
    id INT [pk, increment, not null]
    nombre VARCHAR(100) [not null, unique]
    descripcion TEXT
    unidad_medida_id INT [ref: > unidad_medida.id]
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table etapa_fenologica {
    id INT [pk, increment, not null]
    id_variedad_maiz INT [not null, ref: > variedad_maiz.id]
    nombre_etapa VARCHAR(50) [not null]
    fecha_inicio DATE [not null]
    fecha_fin DATE
    descripcion TEXT
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table caracteristicas_fenotipicas {
    id INT [pk, increment, not null]
    id_cultivo INT [not null, ref: > cultivo.id]
    fecha_registro DATE [not null]
    altura_planta DECIMAL(5,2) [not null]
    altura_planta_unidad_id INT [ref: > unidad_medida.id]
    diametro_tallo DECIMAL(4,2) [not null]
    diametro_tallo_unidad_id INT [ref: > unidad_medida.id]
    numero_hojas INT(3) [not null]
    observaciones TEXT
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table tipo_alerta {
    id INT [pk, increment, not null]
    nombre VARCHAR(50) [not null, unique]
    descripcion TEXT
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table estado_alerta {
    id INT [pk, increment, not null]
    nombre VARCHAR(50) [not null, unique]
    descripcion TEXT
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table alerta {
    id INT [pk, increment, not null]
    id_lote INT [not null, ref: > lote.id]
    tipo_alerta INT [not null, ref: > tipo_alerta.id]
    descripcion TEXT [not null]
    fecha_generacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    nivel_urgencia ENUM('Baja', 'Media', 'Alta') [not null]
    estado_id INT [not null, ref: > estado_alerta.id]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table tipo_notificacion {
    id INT [pk, increment, not null]
    nombre VARCHAR(50) [not null, unique]
    descripcion TEXT
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table estado_notificacion {
    id INT [pk, increment, not null]
    nombre VARCHAR(50) [not null, unique]
    descripcion TEXT
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table notificacion {
    id INT [pk, increment, not null]
    id_usuario INT [not null, ref: > usuario.id]
    tipo_notificacion INT [not null, ref: > tipo_notificacion.id]
    mensaje TEXT [not null]
    leido BOOLEAN [not null, default: `false`]
    fecha_generacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    estado_id INT [not null, ref: > estado_notificacion.id]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table tipo_recomendacion {
    id INT [pk, increment, not null]
    nombre VARCHAR(50) [not null, unique]
    descripcion TEXT
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table recomendacion {
    id INT [pk, increment, not null]
    id_lote INT [not null, ref: > lote.id]
    tipo_recomendacion INT [not null, ref: > tipo_recomendacion.id]
    descripcion TEXT [not null]
    fecha_generacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    prioridad ENUM('Baja', 'Media', 'Alta') [not null]
    estado_id INT [not null, ref: > estado_recomendacion.id]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table accion_mitigacion {
    id INT [pk, increment, not null]
    id_recomendacion INT [ref: > recomendacion.id]
    descripcion TEXT [not null]
    fecha_inicio DATE [not null]
    fecha_fin DATE
    estado_id INT [not null, ref: > estado_accion_mitigacion.id]
    resultado TEXT
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table aplicacion_insumo {
  id INT [pk, increment]
  id_tarea_labor INT [not null, ref: > tarea_labor_cultural.id]
  insumo_id INT [ref: > tipo_insumo_agricola.id]
  fecha_aplicacion DATE [not null]
  cantidad DECIMAL(10,2) [not null]
  costo_unitario DECIMAL(10,2) [not null]
  costo_total DECIMAL(10,2) [not null]
  observaciones TEXT
  fecha_creacion DATETIME [default: `CURRENT_TIMESTAMP`]
  fecha_actualizacion DATETIME [default: `CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP`]
}

Table uso_maquinaria {
  id INT [pk, increment]
  id_tarea_labor INT [not null, ref: > tarea_labor_cultural.id]
  maquinaria_id INT [ref: > tipo_maquinaria_agricola.id]
  fecha_uso DATE [not null]
  horas_uso DECIMAL(5,2) [not null]
  costo_total DECIMAL(10,2) [not null]
  fecha_creacion DATETIME [default: `CURRENT_TIMESTAMP`]
  fecha_actualizacion DATETIME [default: `CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP`]
}

Table tipo_maquinaria_agricola {
  id INT [pk, increment]
  nombre VARCHAR(255) [not null]
  descripcion VARCHAR(255) [not null]
  costo_hora DECIMAL(10,2) [not null]
  fecha_creacion DATETIME [default: `CURRENT_TIMESTAMP`]
  fecha_actualizacion DATETIME [default: `CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP`]
}

Table asignacion {
    id INT [pk, increment, not null]
    usuario_id INT [not null, ref: > usuario.id]
    tarea_labor_cultural_id INT [not null, ref: > tarea_labor_cultural.id]
    fecha_asignacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    estado_id INT [not null, ref: > estado_asignacion.id]
    notas TEXT
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table estado_cultivo {
    id INT [pk, increment, not null]
    nombre VARCHAR(50) [not null, unique]
    descripcion TEXT
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table estado_tarea_labor_cultural {
    id INT [pk, increment, not null]
    nombre VARCHAR(50) [not null, unique]
    descripcion TEXT
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table estado_recomendacion {
    id INT [pk, increment, not null]
    nombre VARCHAR(50) [not null, unique]
    descripcion TEXT
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table estado_accion_mitigacion {
    id INT [pk, increment, not null]
    nombre VARCHAR(50) [not null, unique]
    descripcion TEXT
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table estado_asignacion {
    id INT [pk, increment, not null]
    nombre VARCHAR(50) [not null, unique]
    descripcion TEXT
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table registro_meteorologico {
    id INT [pk, increment, not null]
    id_lote INT [not null, ref: > lote.id]
    fecha DATE [not null]
    temperatura_min DECIMAL(4,2) [not null]
    temperatura_max DECIMAL(4,2) [not null]
    temperatura_promedio DECIMAL(4,2) [not null]
    temperatura_unidad_id INT [ref: > unidad_medida.id]
    presion_atmosferica DECIMAL(6,2) [not null]
    presion_unidad_id INT [ref: > unidad_medida.id]
    humedad_relativa DECIMAL(5,2) [not null]
    humedad_unidad_id INT [ref: > unidad_medida.id]
    precipitacion DECIMAL(6,2) [not null]
    precipitacion_unidad_id INT [ref: > unidad_medida.id]
    indice_uv DECIMAL(3,1) [not null]
    horas_sol DECIMAL(4,2) [not null]
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table tipo_suelo {
    id INT [pk, increment, not null]
    nombre VARCHAR(50) [not null, unique]
    descripcion TEXT
    color VARCHAR(50) [not null]
    textura VARCHAR(50) [not null]
    valor_munsell VARCHAR(20) [not null]
    caracteristicas_generales TEXT
    recomendaciones_manejo TEXT
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: NULL, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table analisis_suelo {
    id INT [pk, increment, not null]
    id_lote INT [not null, ref: > lote.id]
    id_tipo_suelo INT [not null, ref: > tipo_suelo.id]
    fecha_analisis DATE [not null]
    imagen_suelo MEDIUMBLOB [not null]
    confianza_clasificacion DECIMAL(5,2) [not null]
    observaciones TEXT
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: NULL, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table deteccion_gusano_cogollero {
    id INT [pk, increment, not null]
    id_lote INT [not null, ref: > lote.id]
    fecha_deteccion TIMESTAMP [not null]
    imagen_planta MEDIUMBLOB [not null]
    resultado_deteccion ENUM('Detectado', 'No Detectado', 'Indeterminado') [not null]
    confianza_deteccion DECIMAL(5,2) [not null]
    latitud DECIMAL(10,8)
    longitud DECIMAL(11,8)
    observaciones TEXT
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: NULL, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table estado_informe {
    id INT [pk, increment, not null]
    nombre VARCHAR(50) [not null, unique]
    descripcion TEXT
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: NULL, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table tipo_informe {
    id INT [pk, increment, not null]
    nombre VARCHAR(50) [not null, unique]
    descripcion TEXT
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: `NULL`, note: 'ON UPDATE CURRENT_TIMESTAMP']
}

Table informe {
    id INT [pk, increment, not null]
    tipo_informe INT [not null, ref: > tipo_informe.id]
    id_lote INT [ref: > lote.id]
    fecha_generacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    periodo_inicio DATE [not null]
    periodo_fin DATE [not null]
    contenido JSON [not null]
    estado_id INT [not null, ref: > estado_informe.id]
    fecha_revision TIMESTAMP
    observaciones TEXT
    fecha_creacion TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    fecha_modificacion TIMESTAMP [default: NULL, note: 'ON UPDATE CURRENT_TIMESTAMP']
}